{
  "modell": "StandardSamspillVegger",
  "versjon": "1.1-no",
  "generert": "2025-08-23T04:26:42.718798Z",
  "formål": "Maskinlesbar forklaring på hvordan NS 3451, NS 3457-8 og NS 3420 brukes sammen for å beskrive vegger og innholdet, med norske nøkkelnavn og egne roller for bunnsvill og toppsvill.",
  "kodesystemer": {
    "NS3451": {
      "rolle": "Bygningsdel (kontekst/ansvar).",
      "kode_mønster": "^(23|24)\\d{1}(0)?(\\.\\d+)?$",
      "eksempler": {
        "2310": "Bærende yttervegger",
        "2320": "Ikke-bærende yttervegger",
        "2410": "Bærende innervegger",
        "2420": "Ikke-bærende innervegger",
        "2350": "Utvendig kledning og overflater",
        "2360": "Innvendige overflater"
      }
    },
    "NS3457_8": {
      "rolle": "Komponent- og typekoder (familier/varianter) for vegger og lag.",
      "kode_mønster": "^[A-Z]{3}(?:\\.\\d{3})?(?::\\d{2})?$",
      "familier_eksempler": {
        "AVA": "Bærende yttervegg (typefamilie)",
        "AVB": "Bærende innervegg (typefamilie)",
        "AVC": "Ikke-bærende yttervegg (typefamilie)",
        "AVD": "Ikke-bærende innervegg (typefamilie)",
        "APZ": "Plater (gips/spon/sement)",
        "AFD": "Stender/tre (inkl. topp-/bunnsvill i tre)",
        "AFE": "Stender/stål (inkl. topp-/bunnskinne i stål)",
        "BIA": "Isolasjon (mineralull/steinull)",
        "BBZ": "Sperresjikt (dampsperre/membran)",
        "BCZ": "Vindsperre",
        "AOB": "Påforing/lekter/installasjonslag"
      },
      "type_id_konvensjon": "%AAA.###:##  // AAA=familie, ###=typenr, :##=variantnr"
    },
    "NS3420": {
      "rolle": "Beskrivelsestekster, ytelseskrav og måleregler for utførelse/mengder.",
      "henvisninger_eksempler": {
        "QK5": "Platekledninger innvendig",
        "QB2.1": "Bindingsverk av tre",
        "PJ3": "Bindingsverk av stål/tynnplateprofiler",
        "SB1": "Varmeisolering",
        "SF1": "Sperresjikt/membraner (inkl. dampsperre/vindsperre)",
        "SF1.711": "Dampsperre av plast (eksempel)",
        "SF1.285": "Gjennomføring i vindsperresjikt (eksempel)",
        "QK1": "Utlekting/sløyfer/spikerslag",
        "SH": "Branntetting",
        "NH": "Flisarbeider (våtrom)"
      }
    }
  },
  "samspill": {
    "mapping_regler": [
      {
        "hvis": {
          "ns3451_kode_i": [
            "2310"
          ]
        },
        "så": {
          "tillatte_ns3457_8_typefamilier": [
            "AVA"
          ]
        }
      },
      {
        "hvis": {
          "ns3451_kode_i": [
            "2320"
          ]
        },
        "så": {
          "tillatte_ns3457_8_typefamilier": [
            "AVC"
          ]
        }
      },
      {
        "hvis": {
          "ns3451_kode_i": [
            "2410"
          ]
        },
        "så": {
          "tillatte_ns3457_8_typefamilier": [
            "AVB"
          ]
        }
      },
      {
        "hvis": {
          "ns3451_kode_i": [
            "2420"
          ]
        },
        "så": {
          "tillatte_ns3457_8_typefamilier": [
            "AVD"
          ]
        }
      },
      {
        "navn": "Overflater utenfor 231/232/241/242",
        "hvis": {
          "lagrolle_i": [
            "utvendig_kledning",
            "maling",
            "sparkel"
          ]
        },
        "så": {
          "mål_ns3451_kode": "2350/2360",
          "merknad": "Overflater føres utenfor bærende/ikke-bærende vegger."
        }
      },
      {
        "navn": "Åpninger egen post",
        "hvis": {
          "lagrolle_i": [
            "dør",
            "vindusfelt",
            "åpning"
          ]
        },
        "så": {
          "mål_ns3451_kode": "2340/2440"
        }
      }
    ],
    "komponentfamilie_per_rolle": {
      "innvendig_kledning": [
        "APZ"
      ],
      "stenderverk_tre": [
        "AFD"
      ],
      "stenderverk_stål": [
        "AFE"
      ],
      "isolasjon": [
        "BIA"
      ],
      "dampsperre_membran": [
        "BBZ"
      ],
      "vindsperre": [
        "BCZ"
      ],
      "påforing_lekter": [
        "AOB"
      ],
      "bunnsvill": [
        "AFD",
        "AFE"
      ],
      "toppsvill": [
        "AFD",
        "AFE"
      ]
    },
    "ns3420_per_rolle": {
      "innvendig_kledning": [
        "QK5",
        "TB"
      ],
      "stenderverk_tre": [
        "QB2.1"
      ],
      "stenderverk_stål": [
        "PJ3"
      ],
      "isolasjon": [
        "SB1"
      ],
      "dampsperre_membran": [
        "SF1",
        "SF1.711"
      ],
      "vindsperre": [
        "SF1",
        "SF1.285"
      ],
      "påforing_lekter": [
        "QK1"
      ],
      "bunnsvill": [
        "QB2.1",
        "PJ3"
      ],
      "toppsvill": [
        "QB2.1",
        "PJ3"
      ],
      "branntetting_sjakt": [
        "SH"
      ],
      "våtrom_overflate": [
        "NH"
      ]
    }
  },
  "datamodell": {
    "entiteter": {
      "Veggtype": {
        "nøkler": [
          "ns3451_kode",
          "ns3457_8_typekode",
          "type_id",
          "funksjon",
          "ytelse"
        ],
        "beskrivelse": "En spesifikk veggtype (NS 3457-8) plassert i NS 3451-kontekst."
      },
      "Lag": {
        "nøkler": [
          "rolle",
          "komponentkode",
          "komponentfamilie",
          "tykkelse_mm",
          "hulrom_mm",
          "cc_mm",
          "ns3420_henvisninger",
          "måleenhet"
        ]
      }
    },
    "relasjoner": [
      {
        "fra": "Veggtype.ns3451_kode",
        "til": "NS3451.eksempler",
        "type": "klassifikasjon"
      },
      {
        "fra": "Veggtype.ns3457_8_typekode",
        "til": "NS3457_8.familier_eksempler",
        "type": "typefamilie"
      },
      {
        "fra": "Lag.komponentkode",
        "til": "NS3457_8.familier_eksempler",
        "type": "komponentfamilie"
      },
      {
        "fra": "Lag.ns3420_henvisninger[]",
        "til": "NS3420.henvisninger_eksempler",
        "type": "spes_henvisning"
      }
    ]
  },
  "beregningsregler": {
    "mengder": {
      "veggareal_m2": "høyde_m * lengde_m",
      "åpningsareal_m2": "sum(åpninger[].bredde_m * åpninger[].høyde_m)",
      "netto_veggareal_m2": "veggareal_m2 - åpningsareal_m2",
      "kledning_m2": "netto_veggareal_m2 * antall_sider",
      "isolasjon_m3": "netto_veggareal_m2 * (tykkelse_mm/1000)",
      "stendere_lm_loddrett": "ceil(lengde_m / (stender_cc_mm/1000)) * høyde_m",
      "skinner_svill_lm_topp": "lengde_m",
      "skinner_svill_lm_bunn": "lengde_m",
      "spor_for_toppsvill_lm": "lengde_m",
      "spor_for_bunnsvill_lm": "lengde_m",
      "membran_m2": "netto_veggareal_m2",
      "påforing_lm": "ceil(lengde_m / (lekter_cc_mm/1000)) * høyde_m"
    },
    "standardverdier": {
      "antall_sider": 2,
      "stender_cc_mm": 600,
      "lekter_cc_mm": 600,
      "skruer_per_m2": 15
    },
    "enhet_per_rolle": {
      "innvendig_kledning": "m2",
      "isolasjon": "m2/m3",
      "stenderverk": "lm",
      "dampsperre_membran": "m2",
      "vindsperre": "m2",
      "påforing_lekter": "lm",
      "bunnsvill": "lm",
      "toppsvill": "lm"
    }
  },
  "valideringsregler": [
    {
      "id": "V001",
      "hvis": {
        "felt": "ns3451_kode",
        "i": [
          "2310",
          "2320",
          "2410",
          "2420"
        ]
      },
      "så": {
        "sjekk_i": {
          "felt": "ns3457_8_typekode",
          "map": {
            "2310": [
              "AVA"
            ],
            "2320": [
              "AVC"
            ],
            "2410": [
              "AVB"
            ],
            "2420": [
              "AVD"
            ]
          }
        }
      }
    },
    {
      "id": "V002",
      "hvis": {
        "felt": "Lag.rolle",
        "lik": "utvendig_kledning"
      },
      "så": {
        "feil_hvis": {
          "felt": "Veggtype.ns3451_kode",
          "i": [
            "2310",
            "2320"
          ]
        },
        "hint": "Før utvendig kledning i NS 3451: 2350."
      }
    },
    {
      "id": "V003",
      "hvis": {
        "finnes": "åpninger[]"
      },
      "så": {
        "påkrevd_felt": [
          "åpninger[].bredde_m",
          "åpninger[].høyde_m"
        ],
        "bruk_formel": "netto_veggareal_m2"
      }
    },
    {
      "id": "V004",
      "hvis": {
        "felt": "Lag",
        "noen": true
      },
      "så": {
        "påkrevd_felt": [
          "Lag.ns3420_henvisninger[]",
          "Lag.måleenhet"
        ]
      }
    },
    {
      "id": "V005",
      "beskrivelse": "Bunnsvill og toppsvill bør finnes for stendervegger.",
      "hvis": {
        "felt": "Veggtype.ns3457_8_typekode",
        "i": [
          "AVD",
          "AVB",
          "AVC",
          "AVA"
        ]
      },
      "så": {
        "anbefal": [
          "Lag.rolle=bunnsvill",
          "Lag.rolle=toppsvill"
        ]
      }
    }
  ],
  "ifc_binding": {
    "entiteter": {
      "IfcWall": "generisk",
      "IfcWallStandardCase": "lagdelt"
    },
    "klassifikasjon": [
      {
        "system": "NS 3451",
        "lagres_via": "IfcRelAssociatesClassification/IfcClassificationReference",
        "felter": {
          "Reference": "ns3451_kode",
          "Name": "NS 3451",
          "Description": "Bygningsdel"
        }
      },
      {
        "system": "NS 3457-8",
        "lagres_via": "IfcRelAssociatesClassification/IfcClassificationReference",
        "felter": {
          "Reference": "ns3457_8_typekode/type_id",
          "Name": "NS 3457-8",
          "Description": "Komponent/type"
        }
      }
    ],
    "egenskaper": {
      "Pset_WallCommon": {
        "Reference": "Veggtype.type_id",
        "IsExternal": "utledet(ns3451_kode in [2310,2320])",
        "LoadBearing": "utledet(ns3451_kode in [2310,2410])",
        "FireRating": "Veggtype.ytelse.brannklasse?"
      },
      "Qto_WallBaseQuantities": {
        "GrossArea": "veggareal_m2",
        "NetArea": "netto_veggareal_m2",
        "Height": "høyde_m",
        "Length": "lengde_m"
      }
    }
  },
  "eksempel": {
    "Veggtype": {
      "ns3451_kode": "2420",
      "ns3457_8_typekode": "AVD",
      "type_id": "AVD.010:02",
      "funksjon": "lydskiller",
      "ytelse": {
        "rw_dB": 50,
        "dnT_w_mål_dB": 45
      },
      "lag_innside_til_innside": [
        {
          "rolle": "innvendig_kledning_1",
          "komponentkode": "APZ",
          "komponentfamilie": "gipsplate",
          "tykkelse_mm": 13,
          "ns3420_henvisninger": [
            "QK5",
            "TB"
          ],
          "måleenhet": "m2"
        },
        {
          "rolle": "kledning_1_tillegg",
          "komponentkode": "APZ",
          "komponentfamilie": "gipsplate",
          "tykkelse_mm": 13,
          "ns3420_henvisninger": [
            "QK5",
            "TB"
          ],
          "måleenhet": "m2"
        },
        {
          "rolle": "stenderverk",
          "komponentkode": "AFE",
          "komponentfamilie": "stålstender",
          "hulrom_mm": 70,
          "cc_mm": 600,
          "ns3420_henvisninger": [
            "PJ3"
          ],
          "måleenhet": "lm"
        },
        {
          "rolle": "isolasjon",
          "komponentkode": "BIA",
          "komponentfamilie": "mineralull",
          "tykkelse_mm": 70,
          "ns3420_henvisninger": [
            "SB1"
          ],
          "måleenhet": "m2"
        },
        {
          "rolle": "kledning_2_tillegg",
          "komponentkode": "APZ",
          "komponentfamilie": "gipsplate",
          "tykkelse_mm": 13,
          "ns3420_henvisninger": [
            "QK5",
            "TB"
          ],
          "måleenhet": "m2"
        },
        {
          "rolle": "innvendig_kledning_2",
          "komponentkode": "APZ",
          "komponentfamilie": "gipsplate",
          "tykkelse_mm": 13,
          "ns3420_henvisninger": [
            "QK5",
            "TB"
          ],
          "måleenhet": "m2"
        },
        {
          "rolle": "bunnsvill",
          "komponentkode": "AFD/AFE",
          "komponentfamilie": "tre-svill/stålskinne",
          "ns3420_henvisninger": [
            "QB2.1",
            "PJ3"
          ],
          "måleenhet": "lm"
        },
        {
          "rolle": "toppsvill",
          "komponentkode": "AFD/AFE",
          "komponentfamilie": "tre-svill/stålskinne",
          "ns3420_henvisninger": [
            "QB2.1",
            "PJ3"
          ],
          "måleenhet": "lm"
        }
      ],
      "åpninger": [
        {
          "id": "D01",
          "type": "dør",
          "bredde_m": 0.9,
          "høyde_m": 2.1
        }
      ],
      "beregning_inndata": {
        "høyde_m": 3.0,
        "lengde_m": 8.0
      },
      "beregning_formler": {
        "veggareal_m2": "høyde_m * lengde_m",
        "åpningsareal_m2": "0.9*2.1",
        "netto_veggareal_m2": "veggareal_m2 - åpningsareal_m2",
        "bunnsvill_lm": "lengde_m",
        "toppsvill_lm": "lengde_m"
      }
    }
  },
  "komponentreferanser": {
    "APZ": "plate (gips/spon/sementbasert; bruk type i component_family)",
    "AFD": "stender (tre)",
    "AFE": "stender (stål)",
    "BIA": "isolasjon (mineralull/steinull)",
    "BBZ": "membran/folie (radon, dampsperre, våtrom mm.)",
    "BCZ": "vindsperre",
    "AOB": "påforing/lekter"
  }
}